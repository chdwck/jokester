import{d as g,r as k,w as I,o as x,c as f,a as c,b,e as l,u as B,f as i,g as d,t as J,h as C,_ as N,i as S,L as y,j as V}from"./index-76df7c94.js";import{_ as $}from"./NotFoundBox.vue_vue_type_script_setup_true_lang-e5d9667e.js";const q=c("figcaption",{class:"text-center"},[b("Image Generated with "),c("a",{class:"underline",href:"https://platform.openai.com/docs/api-reference/images"},"Dallâ€¢E")],-1),E=g({__name:"ImageBox",props:{url:{type:String,required:!0},alt:{type:String,required:!0}},emits:["error"],setup(m,{emit:r}){const a=m,e=k(null);function o(u){var n,p;(n=e==null?void 0:e.value)!=null&&n.firstChild&&e.value.removeChild(e.value.firstChild);const s=new Image(512,512);s.src=u,s.alt=a.alt,s.onerror=()=>r("error"),(p=e.value)==null||p.appendChild(s)}return I(()=>a.url,u=>o(u)),x(()=>{o(a.url)}),(u,s)=>(l(),f("figure",null,[c("div",{ref_key:"placeholder",ref:e},null,512),q]))}}),G={key:2,class:"p-3 text-white bg-black border border-white rounded-md bg-opacity-90"},L={class:"flex items-center justify-center w-full aspect-square"},D={key:2},O={class:"mb-3 text-xl"},T={class:"flex justify-end gap-2"},M=g({__name:"JokePresentation",props:{jokeId:{type:String,required:!0}},setup(m){const r=m,a=B(),e=i(()=>a.jokesById[r.jokeId]),o=i(()=>{var t;return(t=e.value)==null?void 0:t.some}),u=i(()=>{var t;return(t=e.value)==null?void 0:t.isNone}),s=k(!1),n=k(!1),p=i(()=>a.jokeImagesById[r.jokeId]),v=i(()=>{var t;return(t=p.value)==null?void 0:t.some});async function _(t=!1){n.value&&!t||(n.value=!0,await a.getGeneratedJokeImage(r.jokeId,t),n.value=!1)}async function w(){_(!0)}return I(o,()=>{_()}),x(async()=>{e.value||(s.value=!0,await a.getJokeById(r.jokeId),s.value=!1),await _()}),(t,P)=>{var h,j;return s.value||!e.value?(l(),d(y,{key:0})):u.value?(l(),d($,{key:1})):o.value?(l(),f("article",G,[c("div",L,[v.value&&!n.value?(l(),d(E,{key:0,onError:w,alt:o.value.joke,url:v.value},null,8,["alt","url"])):n.value?(l(),d(y,{key:1})):(l(),f("p",D," ðŸ¤– The image robot doesn't understand this joke... yet.ðŸ¤– "))]),c("p",O,J((h=o.value)==null?void 0:h.joke),1),c("div",T,[C(N,{text:(j=o.value)==null?void 0:j.joke},null,8,["text"])])])):S("",!0)}}}),A=g({__name:"JokeView",setup(m){const r=V(),a=i(()=>r.params.id);return(e,o)=>(l(),d(M,{class:"max-w-2xl mx-auto","joke-id":a.value},null,8,["joke-id"]))}});export{A as default};
